# --- Jour 9 : Pont de corde ---

Ce pont de corde grince alors que vous vous en approchez. Vous ne savez pas exactement son âge, ni même s'il peut supporter votre poids.

Mais bon, en tout cas il a l'air de très bien supporter le poids des elfes. Le pont surplombe une gorge creusée par l'énorme rivière que vous apercevez bien plus bas.

Vous démarrez la traversée du pont avec beaucoup d'attention, ce qui fait s'étirer et se tordre les cordes. Vous décidez de vous distraire en modélisant la physique des cordes : peut-être que vous pourriez même deviner où *ne pas* marcher.

Considérez une corde avec un noeud de chaque côté : ces noeuds marquent la *tête* et la *queue* de cette corde. Si la tête bouge assez loin de la queue, la queue est tirée vers la tête.

À cause de sombre raisonnements impliquant les [longueurs de Planck](https://fr.wikipedia.org/wiki/Longueur_de_Planck), vous devriez pouvoir modéliser les positions des noeuds sur une grille en deux dimensions. Ensuite, en suivant une hypothétique *série de mouvements* (l'entrée de votre puzzle) de la tête, vous pouvez déterminer les mouvements de la queue.

À cause des susmentionnées longueurs de Planck, la corde doit être assez courte ; en fait, la tête (`H`) et la queue (`T`) doivent *toujours se toucher* (l'adjacence diagonale et la superpositions comptent comme se toucher) :

```rope
....
.TH.
....

....
.H..
..T.
....

...
.H. (H covers T)
...
```

Si la tête est à un moment deux espaces directement au-dessus, en-dessous, à gauche ou à droite de la queue, la queue doit alors se déplacer d'un espace dans cette direction pour rester assez proche de la tête :

```rope
.....    .....    .....
.TH.. -> .T.H. -> ..TH.
.....    .....    .....

...    ...    ...
.T.    .T.    ...
.H. -> ... -> .T.
...    .H.    .H.
...    ...    ...
```

Sinon, si la tête et la queue ne se touchent pas et ne sont pas sur la même ligne ou la même colonne, la queue se déplace toujours en diagonale pour tenir la distance :

```rope
.....    .....    .....
.....    ..H..    ..H..
..H.. -> ..... -> ..T..
.T...    .T...    .....
.....    .....    .....

.....    .....    .....
.....    .....    .....
..H.. -> ...H. -> ..TH.
.T...    .T...    .....
.....    .....    .....
```

Vous devez simplement trouver où la queue se déplace alors que la tête suit une série de mouvements. Supposez que la tête et la queue démarrent à la même position, superposées.

Par exemple :

```ropeInstructions
R 4
U 4
L 3
D 1
R 4
D 1
L 5
R 2
```

La série de mouvements déplace la tête *à droite* de quatre espaces, puis *en haut* de quatre espaces, puis *à gauche* de trois espaces, puis *en bas* d'un espace, et ainsi de suite. Après chaque espace franchi, vous devrez mettre à jour la position de la queue si le mouvement de la tête a brisé l'adjacence des deux noeuds. Visuellement, ces mouvements ont lieu comme suit (`s` marque la position de départ) :

```rope
== Initial State ==

......
......
......
......
H.....  (H covers T, s)

== R 4 ==

......
......
......
......
TH....  (T covers s)

......
......
......
......
sTH...

......
......
......
......
s.TH..

......
......
......
......
s..TH.

== U 4 ==

......
......
......
....H.
s..T..

......
......
....H.
....T.
s.....

......
....H.
....T.
......
s.....

....H.
....T.
......
......
s.....

== L 3 ==

...H..
....T.
......
......
s.....

..HT..
......
......
......
s.....

.HT...
......
......
......
s.....

== D 1 ==

..T...
.H....
......
......
s.....

== R 4 ==

..T...
..H...
......
......
s.....

..T...
...H..
......
......
s.....

......
...TH.
......
......
s.....

......
....TH
......
......
s.....

== D 1 ==

......
....T.
.....H
......
s.....

== L 5 ==

......
....T.
....H.
......
s.....

......
....T.
...H..
......
s.....

......
......
..HT..
......
s.....

......
......
.HT...
......
s.....

......
......
HT....
......
s.....

== R 2 ==

......
......
.H....  (H covers T)
......
s.....

......
......
.TH...
......
s.....
```

Après avoir simulé la corde, vous pouvez compter toutes les positions que *la queue a visité au moins une fois*. Dans ce diagramme, `s` marque encore une fois la position de départ (que la queue a également visitée) et `#` marque les autres positions que la queue a visitées :

```rope
..##..
...##.
.####.
....#.
s###..
```

On y voit *`13`* positions qui ont été visitées par la queue au moins une fois.

Simulez l'hypothétique série de mouvements dans sa totalité. *Combien de positions ont été visitées au moins une fois par la queue ?*
